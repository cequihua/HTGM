!function($){return $.easyPieChart=function(t,o){var e,n,i,a,s,r,c,l,p=this;return this.el=t,this.$el=$(t),this.$el.data("easyPieChart",this),this.init=function(){var t,e;return p.options=$.extend({},$.easyPieChart.defaultOptions,o),t=parseInt(p.$el.data("percent"),10),p.percentage=0,p.canvas=$("<canvas width='"+p.options.size+"' height='"+p.options.size+"'></canvas>").get(0),p.$el.append(p.canvas),"undefined"!=typeof G_vmlCanvasManager&&null!==G_vmlCanvasManager&&G_vmlCanvasManager.initElement(p.canvas),p.ctx=p.canvas.getContext("2d"),window.devicePixelRatio>1&&(e=window.devicePixelRatio,$(p.canvas).css({width:p.options.size,height:p.options.size}),p.canvas.width*=e,p.canvas.height*=e,p.ctx.scale(e,e)),p.ctx.translate(p.options.size/2,p.options.size/2),p.ctx.rotate(p.options.rotate*Math.PI/180),p.$el.addClass("easyPieChart"),p.$el.css({width:p.options.size,height:p.options.size,lineHeight:""+p.options.size+"px"}),p.update(t),p},this.update=function(t){return t=parseFloat(t)||0,p.options.animate===!1?i(t):n(p.percentage,t),p},c=function(){var t,o,n;for(p.ctx.fillStyle=p.options.scaleColor,p.ctx.lineWidth=1,n=[],t=o=0;24>=o;t=++o)n.push(e(t));return n},e=function(t){var o;o=t%6===0?0:.017*p.options.size,p.ctx.save(),p.ctx.rotate(t*Math.PI/12),p.ctx.fillRect(p.options.size/2-o,0,.05*-p.options.size+o,1),p.ctx.restore()},l=function(){var t;t=p.options.size/2-p.options.lineWidth/2,p.options.scaleColor!==!1&&(t-=.08*p.options.size),p.ctx.beginPath(),p.ctx.arc(0,0,t,0,2*Math.PI,!0),p.ctx.closePath(),p.ctx.strokeStyle=p.options.trackColor,p.ctx.lineWidth=p.options.lineWidth,p.ctx.stroke()},r=function(){p.options.scaleColor!==!1&&c(),p.options.trackColor!==!1&&l()},i=function(t){var o;r(),p.ctx.strokeStyle=$.isFunction(p.options.barColor)?p.options.barColor(t):p.options.barColor,p.ctx.lineCap=p.options.lineCap,p.ctx.lineWidth=p.options.lineWidth,o=p.options.size/2-p.options.lineWidth/2,p.options.scaleColor!==!1&&(o-=.08*p.options.size),p.ctx.save(),p.ctx.rotate(-Math.PI/2),p.ctx.beginPath(),p.ctx.arc(0,0,o,0,2*Math.PI*t/100,!1),p.ctx.stroke(),p.ctx.restore()},s=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)}}(),n=function(t,o){var e,n;p.options.onStart.call(p),p.percentage=o,Date.now||(Date.now=function(){return+new Date}),n=Date.now(),e=function(){var c,l;return l=Date.now()-n,l<p.options.animate&&s(e),p.ctx.clearRect(-p.options.size/2,-p.options.size/2,p.options.size,p.options.size),r.call(p),c=[a(l,t,o-t,p.options.animate)],p.options.onStep.call(p,c),i.call(p,c),l>=p.options.animate?p.options.onStop.call(p,c,o):void 0},s(e)},a=function(t,o,e,n){var i,a;return i=function(t){return Math.pow(t,2)},a=function(t){return 1>t?i(t):2-i(t/2*-2+2)},t/=n/2,e/2*a(t)+o},this.init()},$.easyPieChart.defaultOptions={barColor:"#ef1e25",trackColor:"#f2f2f2",scaleColor:"#dfe0e0",lineCap:"round",rotate:0,size:110,lineWidth:3,animate:!1,onStart:$.noop,onStop:$.noop,onStep:$.noop},void($.fn.easyPieChart=function(t){return $.each(this,function(o,e){var n,i;return n=$(e),n.data("easyPieChart")?void 0:(i=$.extend({},t,n.data()),n.data("easyPieChart",new $.easyPieChart(e,i)))})})}(jQuery);
